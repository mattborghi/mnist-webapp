(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{278:function(e,t,n){},284:function(e,t){},285:function(e,t){},293:function(e,t){},296:function(e,t){},297:function(e,t){},303:function(e,t,n){"use strict";n.r(t);var i=n(20),a=n.n(i),c=n(140),o=n.n(c),r=(n(278),n(6)),s=n(322),u=n(323),d=n(320),l=n(4),h=n.n(l),m=n(19),f=n(11),v=n(206),p={model:"https://raw.githubusercontent.com/mattborghi/mnist-webapp/main/model/content/model.json"};var b=function(){var e=Object(i.useState)(),t=Object(r.a)(e,2),n=t[0],a=t[1];function c(){return(c=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a(t.model);case 3:n=e.sent,a(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){v.b().then((function(){!function(e){c.apply(this,arguments)}(p)}))}),[]),[function e(t,i){n?n.predict([v.c(t).reshape([1,28,28,1])]).array().then((function(e){var t=(e=e[0]).indexOf(Math.max.apply(Math,Object(m.a)(e)));console.log("predicted: ",t," with probability: ",Math.max.apply(Math,Object(m.a)(e)),"%"),i(t)})):setTimeout((function(){e(t)}),50)}]},j=n(55),g=Object(d.a)((function(e){return{item:{border:"3px solid red",height:"83vh"},container:{padding:20},button:{textAlign:"center"},canvas:{width:"100%",height:"100%"},image:{width:"100%",height:"100%",textAlign:"center"},title:{textAlign:"center",padding:0,margin:0}}}));var x=function(){var e=g(),t=b(),n=Object(r.a)(t,1)[0],a=Object(i.useState)(""),c=Object(r.a)(a,2),o=c[0],d=c[1];return Object(i.useEffect)((function(){if(n){var e=document.getElementById("myCanvas"),t=e.getContext("2d"),i=document.getElementById("paint"),a=getComputedStyle(i);e.width=parseInt(a.getPropertyValue("width")),e.height=parseInt(a.getPropertyValue("height"));var c={x:0,y:0},o=function(){t.lineTo(c.x,c.y),t.stroke()};e.addEventListener("touchstart",(function(t){var n=t.touches[0];e.dispatchEvent(new MouseEvent("mousedown",{clientX:n.clientX,clientY:n.clientY}))}),!1),e.addEventListener("touchend",(function(t){e.dispatchEvent(new MouseEvent("mouseup",{}))}),!1),e.addEventListener("touchmove",(function(t){var n=t.touches[0];e.dispatchEvent(new MouseEvent("mousemove",{clientX:n.clientX,clientY:n.clientY}))}),!1),e.addEventListener("mousemove",(function(t){c.x=t.pageX-e.offsetLeft,c.y=t.pageY-e.offsetTop}),!1),t.lineWidth=25,t.lineJoin="round",t.lineCap="round",t.strokeStyle="red",e.addEventListener("mousedown",(function(n){t.moveTo(c.x,c.y),t.beginPath(),e.addEventListener("mousemove",o,!1)}),!1),e.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",o,!1);var i=new Image;i.onload=function(){t.drawImage(i,0,0,28,28);for(var e=t.getImageData(0,0,28,28).data,a=[],c=0;c<e.length;c+=4){var o=(e[c]+e[c+1]+e[c+2]+e[c+3])/4;a.push(o/255)}a.every((function(e){return 0===e}))?console.error("Can't be all zeros!"):n(a,d)},i.src=e.toDataURL("image/png")}),!1)}}),[n]),Object(j.jsxs)(s.a,{container:!0,className:e.container,direction:"row",justify:"space-around",alignItems:"center",children:[Object(j.jsx)(s.a,{className:e.title,item:!0,xs:12,children:Object(j.jsx)("h1",{children:"MNIST Number Predictor"})}),Object(j.jsx)(s.a,{className:e.item,item:!0,xs:12,sm:5,children:Object(j.jsx)("div",{id:"paint",className:e.canvas,children:Object(j.jsx)("canvas",{id:"myCanvas"})})}),Object(j.jsx)(s.a,{item:!0,sm:2}),Object(j.jsx)(s.a,{className:e.item,item:!0,xs:12,sm:5,children:Object(j.jsx)("div",{id:"number",className:e.image,children:Object(j.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 48 1",xmlns:"http://www.w3.org/2000/svg",focusable:"false",style:{caretColor:"transparent"},children:[""!==o&&Object(j.jsxs)("text",{x:"0",y:"0",fill:"black",fontSize:"30%",children:["Predicted:"," "]}),Object(j.jsx)("text",{x:"30",y:"5",fill:"red",children:o})]})})}),Object(j.jsx)(s.a,{className:e.button,item:!0,xs:!0,children:Object(j.jsx)(u.a,{variant:"outlined",onClick:function(){return d("")},children:"Clear"})})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,325)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root")),O()}},[[303,1,2]]]);
//# sourceMappingURL=main.99f0dea0.chunk.js.map