(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{282:function(e,t,n){},290:function(e,t){},291:function(e,t){},299:function(e,t){},302:function(e,t){},303:function(e,t){},309:function(e,t,n){"use strict";n.r(t);var i=n(20),a=n.n(i),c=n(140),o=n.n(c),r=(n(282),n(4)),s=n(328),u=n(329),d=n(326),l=n(248),h=n(5),m=n.n(h),f=n(19),p=n(11),v=n(206),b={model:"https://raw.githubusercontent.com/mattborghi/mnist-webapp/main/model/content/model.json"};var j=function(){var e=Object(i.useState)(),t=Object(r.a)(e,2),n=t[0],a=t[1];function c(){return(c=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a(t.model);case 3:n=e.sent,a(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){v.b().then((function(){!function(e){c.apply(this,arguments)}(b)}))}),[]),[function e(t,i){n?n.predict([v.c(t).reshape([1,28,28,1])]).array().then((function(e){var t=(e=e[0]).indexOf(Math.max.apply(Math,Object(f.a)(e)));console.log("predicted: ",t," with probability: ",Math.max.apply(Math,Object(f.a)(e)),"%"),i(t)})):setTimeout((function(){e(t)}),50)}]},g=n(51),x=Object(d.a)((function(e){return{item:{border:"3px solid red",height:"83vh"},container:{padding:20},button:{textAlign:"center"},canvas:{width:"100%",height:"100%"},image:{width:"100%",height:"100%",textAlign:"center"},title:{textAlign:"center",padding:0,margin:0}}}));var O=function(){var e=x(),t=j(),n=Object(r.a)(t,1)[0],a=Object(i.useState)(""),c=Object(r.a)(a,2),o=c[0],d=c[1];return Object(i.useEffect)((function(){if(n){var e=document.getElementById("myCanvas"),t=e.getContext("2d"),i=document.getElementById("paint"),a=getComputedStyle(i);e.width=parseInt(a.getPropertyValue("width")),e.height=parseInt(a.getPropertyValue("height"));var c={x:0,y:0},o=function(){t.lineTo(c.x,c.y),t.stroke()};e.addEventListener("touchstart",(function(t){var n=t.touches[0];e.dispatchEvent(new MouseEvent("mousedown",{clientX:n.clientX,clientY:n.clientY}))}),!1),e.addEventListener("touchend",(function(t){e.dispatchEvent(new MouseEvent("mouseup",{}))}),!1),e.addEventListener("touchmove",(function(t){var n=t.touches[0];e.dispatchEvent(new MouseEvent("mousemove",{clientX:n.clientX,clientY:n.clientY}))}),!1),e.addEventListener("mousemove",(function(t){c.x=t.pageX-e.offsetLeft,c.y=t.pageY-e.offsetTop}),!1),t.lineWidth=25,t.lineJoin="round",t.lineCap="round",t.strokeStyle="red",e.addEventListener("mousedown",(function(n){t.moveTo(c.x,c.y),t.beginPath(),e.addEventListener("mousemove",o,!1)}),!1),e.addEventListener("mouseup",(function(){e.removeEventListener("mousemove",o,!1);var i=new Image;i.onload=function(){t.drawImage(i,0,0,28,28);for(var e=t.getImageData(0,0,28,28).data,a=[],c=0;c<e.length;c+=4){var o=(e[c]+e[c+1]+e[c+2]+e[c+3])/4;a.push(o/255)}a.every((function(e){return 0===e}))?console.error("Can't be all zeros!"):n(a,d)},i.src=e.toDataURL("image/png")}),!1)}}),[n]),Object(g.jsxs)(s.a,{container:!0,className:e.container,direction:"row",justify:"space-around",alignItems:"center",children:[Object(g.jsx)(l.Github,{url:"https://github.com/mattborghi/mnist-webapp"}),Object(g.jsx)(s.a,{className:e.title,item:!0,xs:12,children:Object(g.jsx)("h1",{children:"MNIST Number Predictor"})}),Object(g.jsx)(s.a,{className:e.item,item:!0,xs:12,sm:5,children:Object(g.jsx)("div",{id:"paint",className:e.canvas,children:Object(g.jsx)("canvas",{id:"myCanvas"})})}),Object(g.jsx)(s.a,{item:!0,sm:2}),Object(g.jsx)(s.a,{className:e.item,item:!0,xs:12,sm:5,children:Object(g.jsx)("div",{id:"number",className:e.image,children:Object(g.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 48 1",xmlns:"http://www.w3.org/2000/svg",focusable:"false",style:{caretColor:"transparent"},children:[""!==o&&Object(g.jsxs)("text",{x:"0",y:"0",fill:"black",fontSize:"30%",children:["Predicted:"," "]}),Object(g.jsx)("text",{x:"30",y:"5",fill:"red",children:o})]})})}),Object(g.jsx)(s.a,{className:e.button,item:!0,xs:!0,children:Object(g.jsx)(u.a,{variant:"outlined",onClick:function(){return d("")},children:"Clear"})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,331)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))};o.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(O,{})}),document.getElementById("root")),w()}},[[309,1,2]]]);
//# sourceMappingURL=main.dd6a6128.chunk.js.map